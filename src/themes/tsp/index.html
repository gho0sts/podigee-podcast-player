<div class="podcast-player">
  <audio></audio>

  <div class="player-header">
    <span class="podcast-title" pp-html="podcastTitle"></span>
  </div>

  <div class="main-player">
    <img class="cover-image" pp-src="coverUrl" />

    <div class="controls">
      <button class="play-button"></button>
    </div>

    <div id="marquee-container" class="episode-basic-info">
      <div id="marquee" class="marquee">
        <div id="marquee-content" class="marquee-content">
          <div class="episode-title" pp-html="title"></div>
          <div class="episode-subtitle" pp-html="subtitle"></div>
        </div>
      </div>
    </div>

    <div class="buttons"></div>

    <progressbar/>
  </div>

  <div class="player-footer">
    <a href="#" class="subscribe-button">
      <svg xmlns="http://www.w3.org/2000/svg" width="13" height="16" viewBox="0 0 11 14" class="svg-symbol podlove-button__icon" preserveAspectRatio="xMinYMin meet" aria-hidden="true"><title>Podcast</title><path d="M2.384 9.931A5.423 5.423 0 0 1 0 5.444C0 2.438 2.462 0 5.5 0S11 2.438 11 5.444a5.423 5.423 0 0 1-2.384 4.487l-.445-.64a4.649 4.649 0 0 0 2.043-3.847c0-2.577-2.11-4.666-4.714-4.666C2.896.778.786 2.868.786 5.444c0 1.596.809 3.005 2.043 3.846l-.445.641zM3.497 8.33a3.486 3.486 0 0 1-1.533-2.885c0-1.933 1.583-3.5 3.536-3.5s3.536 1.567 3.536 3.5A3.486 3.486 0 0 1 7.503 8.33l-.445-.641A2.712 2.712 0 0 0 8.25 5.444c0-1.503-1.231-2.722-2.75-2.722S2.75 3.941 2.75 5.444c0 .931.472 1.753 1.192 2.244l-.445.64zm2.003.227c1.085 0 1.964.879 1.964 1.964v1.516a1.964 1.964 0 0 1-3.928 0V10.52c0-1.085.88-1.964 1.964-1.964zm-.016-4.667h.032a1.556 1.556 0 1 1 0 3.111h-.032a1.556 1.556 0 1 1 0-3.111z" fill-rule="nonzero"></path></svg>
      <span>Abonnieren</span>
    </a>
    <a pp-href="podcastUrl" target="_blank" class="button-all-episodes" pp-if="podcastUrl">Alle Folgen</a>
  </div>

  <div class="panels"></div>
</div>

<script type="text/javascript">
"use strict";

var marqueeContainer = document.getElementById('marquee-container');
var marqueeElement = document.getElementById('marquee');
var marqueeContent = document.getElementById('marquee-content');
var hasMarquee = false;

function addMarqueeAnimation() {
  var newMarqueeElement = marqueeContent.cloneNode(true);

  newMarqueeElement.id = 'marquee-content-clone';
  marqueeElement.style.width = (marqueeContent.offsetWidth + 60) * 2 + 'px';
  marqueeElement.appendChild(newMarqueeElement);
  marqueeContainer.classList.add('animating');
  hasMarquee = true;
}

function checkForMarquee() {
  if (marqueeContent.offsetWidth > marqueeContainer.offsetWidth) {
    return true;
  } else {
    return false;
  }
}

function init() {
  if (checkForMarquee() === true && hasMarquee === false) {
    addMarqueeAnimation();
  }
}

function removeMarqeeAnimation() {
  var marqueeClone = document.getElementById('marquee-content-clone');
  marqueeClone.parentNode.removeChild(marqueeClone);
  marqueeContainer.classList.remove('animating');
  hasMarquee = false;
}

window.addEventListener('resize', function() {
  if (checkForMarquee() === true && hasMarquee === false) {
    addMarqueeAnimation();
  } else if (checkForMarquee() === false && hasMarquee === true) {
    removeMarqeeAnimation();
  }

});
init();
</script>
